<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Command.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Command.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** Class representing a command. */
class Command {
	/**
   * Create a command.
   * @class
   * @param {string|Array} name - The name of the command. If passed as an
   *     array, the first item of the array is used as the name and the rest of
   *     the items are set as aliases.
   * @param {object} options - Options of command
   * @param {boolean} [options.guildOnly=false] - Command only can works in guilds
   * @param {boolean} [options.dmOnly=false] - Command only can works in dm messages
   * @param {string|array} [options.userOnly=false] - Command only can works in these users
   * @param {boolean} [options.ownerOnly=false] - Command only can works in bot owner
   * @param {string|array} [options.rolesCanUse=false] - Command only can works in guilds
   * and members with roles
   * @param {Command~check} [options.check=null] - Command only can works if this
   * funciton return true
   * @param {array|object} [options.permissions=null] - Command only can works if member
   * in fuild has permissions
   * @param {number} [options.cooldown=null] - Time in seconds
   * @param {string} [options.cooldownMessage='Not yet! Ready in **&lt;cd>**s'] -
   * Message sent if command is in cooldown for that user
   * @param {string} [options.subcommandFrom=undefined] -
   * Name of command that this commad is subcommand. It needs exists.
   * @param {string} [options.category='Default'] - Category from this command
   * @param {string} [options.help=''] - Description of command
   * @param {string} [options.args=''] - The command arguments
   * @param {boolean} [options.hide=false] - Hide command from default help command
   * @param {boolean} [options.enable=true] - Enable/Disable the command
   * @param {boolean} [options.await=false] - Await to resolve the command for put cooldown
	 *
   * @param {Command~run} run - The function to be called when the command is executed.
   */
	constructor(name, options, run) {
		if (Array.isArray(name)) {
			/** @prop {string} - Name of Command */
			[this.name] = name.splice(0, 1)
			/** @prop {string[]} - Command aliases */
			this.aliases = name
		} else {
			this.name = name
			this.aliases = []
		}
		if (!this.name) throw new Error('Name is required')
		/** @prop {Command~run} - Run function of command */
		this.run = run
		if (!this.run) throw new Error('Run function is required')
		/** @prop {string} - Description of command */
		this.help = options.help || ''
		/** @prop {Command[]} - Subcommands of Command. */
		this.subcommands = []
		/** @prop {Command} - Upper Command */
		this.upcommand = undefined
		/** @prop {boolean} - Command responds to guilds messages */
		this.guildOnly = options.guildOnly || false
		/** @prop {boolean} - Command responds to dm messages */
		this.dmOnly = options.dmOnly || false
		/** @prop {boolean} - Command responds to specific users messages */
		this.userOnly = typeof options.userOnly === 'string' ? [options.userOnly] : (Array.isArray(options.userOnly)) ? options.userOnly : false /* eslint no-nested-ternary : "off" */
		/** @prop {boolean} - Command responds to owner messages */
		this.ownerOnly = options.ownerOnly || false
		/** @prop {string[]} -
		 * Command responds to specific members with roles, Message should be sent from a guild */
		this.rolesCanUse = options.rolesCanUse || false
		/** @prop {Command~check} - Custom requirements to execute the command */
		this.check = options.check || null
		/** @prop {string[]} - Array of permissions in strings */
		this.permissions = options.permissions || null
		/** @prop {string} - Time in seconds that Command has cooldown for a user */
		this.cooldown = options.cooldown || null
		this.cooldowns = {}
		/** @prop {string} -
		 * Message to responds when a Command is on cooldown. Replace "&lt;cd>" for seconds remaining */
		this.cooldownMessage = options.cooldownMessage || 'Not yet! Ready in **&lt;cd>**s'
		/** @prop {string} - Name of uppercomand */
		this.subcommandFrom = options.subcommandFrom
		/** @prop {string} - Command category. It should exist if not, will be 'Default' */
		this.category = options.category || 'Default'
		/** @prop {string} - Arguments for a command */
		this.args = options.args || ''
		/** @prop {boolean} - Hide for a default help Command */
		this.hide = options.hide !== undefined ? options.hide : false // Hide command from help command
		/** @prop {boolean} - Enable/Disable the command */
		this.enable = options.enable !== undefined ? options.enable : true // Enable or disable command
		/** @prop {boolean} - Await the execution. (cooldown purposes) */
		this.await = options.await !== undefined ? options.await : false
		// Await result comand and warning if return is undefined
	}

	/**
    * @callback Command~run
    * A function to be called when a command is executed. Accepts information
    * about the message that triggered the command as arguments.
    * @this {Client} The client instance that recieved the message triggering the
    *     command.
    * @param {Eris.Message} msg - The Eris message object that triggered the command.
    *     For more information, see the Eris documentation:
    *     {@link https://abal.moe/Eris/docs/Message}
    * @param {args} args - An array of arguments passed to the command,
    *     obtained by removing the command name and prefix from the message, then
    *     splitting on spaces. To get the raw text that was passed to the
    *     command, use `args.join(' ')`.
	* @param {Client} client client instance that recieved the message triggering the
    *     command.
    * @param {Command} command - The name or alias used to call the command in
    *     the message. Will be one of the values of `this.names`.
    */

	/**
	* @callback Command~check
	* A function to be called before execute a coomand.
	* It's a custom requirement to execute the command. It should return true or false
	* @param {Eris.Message} msg - The Eris message object that triggered the command.
	*     For more information, see the Eris documentation:
	*     {@link https://abal.moe/Eris/docs/Message}
	* @param {args} args - An array of arguments passed to the command,
	*     obtained by removing the command name and prefix from the message, then
	*     splitting on spaces. To get the raw text that was passed to the
	*     command, use `args.join(' ')`.
	* @param {Command} command - The name or alias used to call the command in
	*     the message. Will be one of the values of `this.names`.
	*/

	/**
	* All names that can be used to invoke the command - its primary name in
	* addition to its aliases.
	* @return {Array&lt;string>}
	*/
	get names() {
		return [this.name, ...this.aliases]
	}

	/**
	 * Get cooldown for user
	 * @param  {string} id - User id
	 * @return {number}    - Time in seconds that command is in cooldown for that user
	 */
	getCooldown(id) {
		return this.cooldowns[id] - Math.round(new Date().getTime() / 1000)
	}

	/**
	 * Set cooldown for user
	 * @param {string} id - User id
	 * @param {number} [cd] - Set cooldown. If cd is defined, set to timestamp,
	 * else add cooldown to now
	 */
	setCooldown(id, cd) {
		this.cooldowns[id] = cd !== undefined ?
			cd : Math.round(new Date().getTime() / 1000) + this.cooldown
	}

	/** Throw a command error */
	error(message) {
		throw new Error(message)
	}
}

module.exports = Command
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Category.html">Category</a></li><li><a href="Client.html">Client</a></li><li><a href="Command.html">Command</a></li><li><a href="Component.html">Component</a></li></ul><h3>Events</h3><ul><li><a href="Client.html#event:aghanim:command:error">aghanim:command:error</a></li><li><a href="Client.html#event:aghanim:command:run">aghanim:command:run</a></li><li><a href="Client.html#event:aghanim:component:error">aghanim:component:error</a></li><li><a href="Client.html#event:aghanim:error">aghanim:error</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-1getting-started.html">Getting Started</a></li><li><a href="tutorial-2create-bot.html">Create a bot</a></li><li><a href="tutorial-3command.html">Create Commands/Subcommands</a></li><li><a href="tutorial-4components.html">Create Components</a></li><li><a href="tutorial-5categories.html">Create Categories</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
